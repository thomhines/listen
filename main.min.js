$(document).ready((function(){let t=null,n=null,e=!1;function i(e,i,a){const o=$("#"+e);o.empty(),0!==i.length?i.forEach((function(e){const i=$('<div class="file-item"></div>'),c=e.replace(/\.[^/.]+$/,"");i.html(`\n\t\t\t\t<span class="file-name">${c}</span>\n\t\t\t\t<button class="play-btn" data-file="${e}" data-type="${a}">Play</button>\n\t\t\t`),i.find(".play-btn").on("click",(function(){!function(e,i){const a=i+"/"+e;if("audio"===i){n&&(n.pause(),n=null);const i=$("#audio-player")[0];i.src=a,i.play(),t=i,n=null;const c=e.replace(/\.[^/.]+$/,"");$("#track-title").text(c),u(!0),o=!0,$("#back-15-btn").prop("disabled",!o),$("#play-pause-btn").prop("disabled",!o),$("#forward-15-btn").prop("disabled",!o)}else if("music"===i){const t=$("#music-player")[0];t.src=a,t.play(),n=t}var o}($(this).data("file"),$(this).data("type")),$(".modal").removeClass("active")})),o.append(i)})):o.append('<p class="no-files">No files found</p>')}function a(){t&&(t.paused?(t.play(),u(!0)):(t.pause(),u(!1)),c())}function o(n){if(t){const e=Math.max(0,t.currentTime+n);t.currentTime=e}}function c(){const n=$("#play-pause-btn");t&&!t.paused?n.text("⏸"):n.text("▶")}function s(t){const e=$("#music-control-btn");n?(e.prop("disabled",!1),e.text(t?"⏸":"▶")):(e.prop("disabled",!0),e.text("▶"))}function u(t){t?$("#main-player-area").addClass("playing"):$("#main-player-area").removeClass("playing"),c()}function l(){if(!t)return;const n=t.currentTime,e=t.duration;isNaN(n)||isNaN(e)||($("#current-time").text(d(n)),$("#total-time").text(d(e)),$("#track-duration").text(`${d(n)} / ${d(e)}`))}function r(n){if(!t)return;const e=$("#scrubber-bar")[0].getBoundingClientRect(),i=(n.type.includes("touch")?n.touches[0].clientX:n.clientX)-e.left,a=Math.max(0,Math.min(1,i/e.width)),o=a*t.duration;t.currentTime=o;const c=100*a;$("#scrubber-progress").css("width",c+"%"),$("#scrubber-handle").css("left",c+"%"),$("#current-time").text(d(o)),$("#track-duration").text(`${d(o)} / ${d(t.duration)}`)}function d(t){if(isNaN(t))return"00:00";const n=Math.floor(t/60),e=Math.floor(t%60);return`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}i("audio-files-list",window.audioFiles||[],"audio"),i("music-files-list",window.musicFiles||[],"music"),$("#main-player-area").on("click",(function(t){$(t.target).closest("#controls").length||a()})),$("#audio-files-btn").on("click",(function(){$("#audio-files-modal").addClass("active")})),$("#music-files-btn").on("click",(function(){$("#music-files-modal").addClass("active")})),$("#back-15-btn").on("click",(function(){o(-15)})),$("#play-pause-btn").on("click",(function(){a()})),$("#forward-15-btn").on("click",(function(){o(15)})),$("#music-control-btn").on("click",(function(){n&&(n.paused?n.play():n.pause())})),$(".close-btn").on("click",(function(){$(".modal").removeClass("active")})),$(".modal").on("click",(function(t){t.target===this&&$(this).removeClass("active")})),$("#scrubber-bar").on("mousedown touchstart",(function(t){e=!0,r(t)})),$(document).on("mousemove touchmove",(function(t){e&&r(t)})),$(document).on("mouseup touchend",(function(){e&&(e=!1)})),function(){const n=$("#audio-player")[0],i=$("#music-player")[0];n.addEventListener("loadedmetadata",(function(){l()})),n.addEventListener("timeupdate",(function(){l(),function(){if(!t||e)return;const n=t.currentTime,i=t.duration;if(!isNaN(n)&&!isNaN(i)&&i>0){const t=n/i*100;$("#scrubber-progress").css("width",t+"%"),$("#scrubber-handle").css("left",t+"%")}}()})),n.addEventListener("ended",(function(){u(!1)})),i.addEventListener("loadedmetadata",(function(){})),i.addEventListener("play",(function(){s(!0)})),i.addEventListener("pause",(function(){s(!1)})),i.addEventListener("ended",(function(){i.currentTime=0,i.play()}))}()}));